

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}



model Blog {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  tag         String
  intro       String
  content     String
  writerName  String
  writerIntro String
  writerPic   String   // Stores the image URL
  timeStamp   String
  topicPic    String   // Stores the image URL
  writerEmail String

  isAccepted  Boolean  @default(false)

  subject     String?
  text        String?
}

model Query {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
}



enum Role {
  USER
  ADMIN
  SUPERADMIN
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String   @unique
  name      String?
  picture   String?
  googleId  String?
  password  String?
  role      Role     @default(USER)


  isVerified   Boolean   @default(false) 
  otp          String?   
  otpExpires   DateTime?
  userimg    String?
  bio        String?
  linkedin   String?
  github     String?
  instagram  String?
  facebook   String?


  passwordResetToken   String?
  passwordResetExpires DateTime?
  refreshTokens        RefreshToken[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model RefreshToken {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  token       String   @unique
  userId      String   @db.ObjectId
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  expiresAt   DateTime
  revoked     Boolean  @default(false)
  replacedByToken String?

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("refresh_tokens")
}

<<<<<<< HEAD
model Query {
  id        String   @id @map("_id")  @default(auto()) @db.ObjectId
  name      String
  email     String
  message   String
  read      Boolean  @default(false)
  createdAt DateTime @default(now())
}



enum Role {
  USER
  ADMIN
  SUPERADMIN
}


model Otp {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String
  otp       String
  createdAt DateTime @default(now())
}


model Blog {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  email     String
  subject   String
  text      String
  createdAt DateTime @default(now())
}

model PublicBlog {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  authoruniqueid String
  blogId         String
  title          String
  tag            String
  intro          String
  content        String
  writername     String
  writerintro    String
  writerpic      String
  writeremail    String
  topicpic       String
  timestamp      DateTime @default(now())
  createdAt      DateTime @default(now())
}

model Comment {
  id            String   @id @default(auto()) @map("_id") @db.ObjectId

  postId        String
  commentAuthor String
  commentPic    String
  text          String
  userId        String

  createdAt     DateTime @default(now())
}

//-----------------event specific----------------
// Business Hackathon Event (Event ID: 1)
model BusinessHackathon {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  teamName              String
  teamLeaderName        String
  teamLeaderEmail       String   @unique
  teamLeaderPhone       String
  teamLeaderScholarId   String?
  collegeType           String   // "nit_silchar" or "other"
  collegeName           String?  // Required if collegeType is "other"
  department            String?
  year                  String?
  teamMembers           BusinessTeamMember[]
  createdAt             DateTime @default(now())
}

type BusinessTeamMember {
  name      String
  phone     String
  scholarId String?
}

// Treasure Hunt Event (Event ID: 2)
model TreasureHunt {
  id                        String   @id @default(auto()) @map("_id") @db.ObjectId
  teamName                  String
  teamLeaderName            String
  teamLeaderEmail           String   @unique
  teamLeaderPhone           String
  teamLeaderScholarId       String?
  teamViceCaptainName       String
  teamViceCaptainPhone      String
  teamViceCaptainScholarId  String?
  collegeType               String   // "nit_silchar" or "other"
  collegeName               String?  // Required if collegeType is "other"
  department                String?
  year                      String?
  teamMembers               TreasureTeamMember[]
  createdAt                 DateTime @default(now())
}

type TreasureTeamMember {
  name      String
  scholarId String?
}

// BID-WISE Event (Event ID: 3)
model BidWise {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  teamName              String
  teamLeaderName        String
  teamLeaderEmail       String   @unique
  teamLeaderPhone       String
  teamLeaderScholarId   String?
  collegeType           String   // "nit_silchar" or "other"
  collegeName           String?  // Required if collegeType is "other"
  department            String?
  year                  String?
  teamMembers           BidWiseTeamMember[]
  createdAt             DateTime @default(now())
}

type BidWiseTeamMember {
  name  String
  phone String
}

// Adovation Event (Event ID: 4)
model Adovation {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  teamName              String
  teamLeaderName        String
  teamLeaderEmail       String   @unique
  teamLeaderPhone       String
  teamLeaderScholarId   String?
  collegeType           String   // "nit_silchar" or "other"
  collegeName           String?  // Required if collegeType is "other"
  department            String?
  year                  String?
  teamMembers           AdovationTeamMember[]
  createdAt             DateTime @default(now())
}

type AdovationTeamMember {
  name      String
  phone     String
  scholarId String?
}

// Startup Expo Event (Event ID: 5)
model StartupExpo {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  teamName              String
  teamLeaderName        String
  teamLeaderEmail       String   @unique
  teamLeaderPhone       String
  teamLeaderScholarId   String?
  businessDescription   String
  driveLink             String?
  collegeType           String   // "nit_silchar" or "other"
  collegeName           String?  // Required if collegeType is "other"
  department            String?
  year                  String?
  teamMembers           StartupExpoTeamMember[]
  createdAt             DateTime @default(now())
}

type StartupExpoTeamMember {
  name      String
  phone     String
  scholarId String?
}

// Team Member Collections for validation
// Business Hackathon Members
model BusinessHackathonMembers {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  memberName            String
  memberEmail           String?
  memberPhone           String
  teamName              String
  createdAt             DateTime @default(now())
  
  // Compound index to prevent duplicate registrations
  @@unique([memberPhone, memberName])
}

// Treasure Hunt Members
model TreasureHuntMembers {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  memberName            String
  memberEmail           String?
  memberPhone           String?
  teamName              String
  createdAt             DateTime @default(now())
  
  // Compound index to prevent duplicate registrations
  @@unique([memberName, memberPhone])
}

// BID-WISE Members
model BidWiseMembers {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  memberName            String
  memberEmail           String?
  memberPhone           String
  teamName              String
  createdAt             DateTime @default(now())
  
  // Compound index to prevent duplicate registrations
  @@unique([memberPhone, memberName])
}

// Adovation Members
model AdovationMembers {
  id                    String   @id @default(auto()) @map("_id") @db.ObjectId
  memberName            String
  memberEmail           String?
  memberPhone           String
  teamName              String
  createdAt             DateTime @default(now())
  
  // Compound index to prevent duplicate registrations
  @@unique([memberPhone, memberName])
}
//-------------------------------------------------------------------